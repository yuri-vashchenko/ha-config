# RGB LED in corridor

sensor:
  - platform: mqtt
    name: corridor_rgb_led_state
    state_topic: "home/corridor/rgb_led/state"

select:
  - platform: mqtt
    command_topic: "home/corridor/rgb_led/state"
    state_topic: "home/corridor/rgb_led/state"
    name: corridor_rgb_led
    retain: true
    options:
      - "off"
      - "temperature"
      - "warning"
      - "alarm"

automation:
  - id: Control RGB LED on/off in corridor
    alias: corridor_rgb_led_control
    trigger:
      - platform: mqtt
        topic: "home/corridor/rgb_led/state"
        payload: "off"
        id: "off"
      - platform: mqtt
        topic: "home/corridor/rgb_led/state"
        payload: "temperature"
        id: "temperature"
      - platform: mqtt
        topic: "home/corridor/rgb_led/state"
        payload: "warning"
        id: "warning"
      - platform: mqtt
        topic: "home/corridor/rgb_led/state"
        payload: "alarm"
        id: "alarm"
    condition:
      condition: state
      entity_id: binary_sensor.light_control
      state: "on"
    action:
      choose:
        - alias: corridor_rgb_led_turn_off
          conditions:
            condition: trigger
            id: "off"
          sequence:
            service: light.turn_off
            target:
              entity_id: light.rgb_led_light
        - alias: corridor_rgb_led_temperature
          conditions:
            condition: trigger
            id: "temperature"
          sequence:
            service: light.turn_on
            target:
              entity_id: light.rgb_led_light
            data:
              effect: "Temperature"