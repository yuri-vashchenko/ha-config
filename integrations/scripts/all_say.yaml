# Script that trigger all the speakers to say a given message
script:
  alice_say:
    alias: yandex_station_say
    description: ""
    fields:
      message:
        description: "The message to say"
        example: "Как прекрасен этот мир"
      volume:
        description: "The volume from 0 to 100"
        example: "80"
    use_blueprint:
      path: yuri-vashchenko/yandex-station-say.yaml
      input:
        speaker_target: group.alice
        announcement_message: "{{ message }}"
        volume_level: "{{ volume }}"

  nest_say:
    alias: google_assistant_say
    description: ""
    fields:
      message:
        description: "The message to say"
        example: "Как прекрасен этот мир"
    use_blueprint:
      path: yuri-vashchenko/google-assistant-say.yaml
      input:
        speaker_target: media_player.nest
        announcement_message: "{{ message }}"

  all_say:
    alias: all_speaker_announce_message
    fields:
      message:
        description: "The message to say"
        example: "Как прекрасен этот мир"
      volume:
        description: "The volume from 0 to 100"
        example: '80'
    sequence:
      - service: script.turn_on
        target:
          entity_id: script.alice_say
        data_template:
          variables:
            message: "{{ message }}"
            volume: "{{ volume }}"
      - alias: call_nest_say
        service: script.turn_on
        target:
          entity_id: script.nest_say
        data_template:
          variables:
            message: "{{ message }}"
